3.Рокировка

Дана позиция. 
Необходимо сгенерировать все возможные ходы королём той стороны, чей сейчас ход, в том числе и ход-рокировки, если таковые возможны.

Условия возможности рокировки в короткую сторону.
1. Установлен флаг K (для белых) или k (для чёрных)
2. Поля между королём d и ладьёй h - пустые.

Условия возможности рокировки в длинную сторону.
1. Установлен флаг Q (для белых) или q (для чёрных)
2. Поля между королём d и ладьёй a - пустые.

Рокировкой является ход королём на две клетки в сторону ладьи.
Проверку на шах и прохождение битого поля делать не нужно.

Дано: FEN-позиция.
Надо: Вывести количество ходов и их список.